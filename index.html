<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>3行アプリ開発プロジェクト</title>
  <link rel="stylesheet" href="/assets/app.css" />
</head>
<body>
  <header class="hero">
    <div class="hero-inner">
      <h1 class="hero-title">3行アプリ開発プロジェクト</h1>
      <p class="hero-subtitle">授業内容を「3行」で振り返る学習支援アプリ</p>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2 class="card-title">メニュー</h2>
      <p class="muted">機能を選択してください。</p>

      <div class="grid grid-2">
        <a class="menu-btn" href="/posts.html">
          <div class="menu-btn-title">3行投稿</div>
          <div class="menu-btn-desc">授業の要点を3行でまとめて投稿</div>
        </a>

        <a class="menu-btn" href="/questions.html">
          <div class="menu-btn-title">質問掲示板</div>
          <div class="menu-btn-desc">疑問を投稿して、回答で学び合い</div>
        </a>

        <a class="menu-btn" href="/quizzes.html">
          <div class="menu-btn-title">クイズ</div>
          <div class="menu-btn-desc">思い出しクイズで理解を定着</div>
        </a>

        <a class="menu-btn" href="/reminders.html">
          <div class="menu-btn-title">復習リマインダー</div>
          <div class="menu-btn-desc">翌日/1週間後の復習を習慣化</div>
        </a>

        <a class="menu-btn" href="/ranking.html">
          <div class="menu-btn-title">ランキング</div>
          <div class="menu-btn-desc">投稿/回答の貢献度を可視化</div>
        </a>

        <a class="menu-btn" href="/settings.html">
          <div class="menu-btn-title">設定</div>
          <div class="menu-btn-desc">表示・ベースURL等の設定</div>
        </a>
      </div>
    </section>

    <section class="card">
      <h2 class="card-title">API ステータス</h2>
      <div class="row row-between row-center">
        <div class="row row-center gap-sm">
          <span id="apiDot" class="dot dot-gray"></span>
          <span id="apiText" class="muted">checking...</span>
        </div>
        <button class="btn" id="btnHealth">更新</button>
      </div>
      <pre class="code" id="healthOut"></pre>
    </section>
  </main>

  <script src="/assets/common.js"></script>
  <script>
    async function runHealth(){
      try{
        setDot("apiDot","gray");
        setText("apiText","checking...");
        const data = await apiGet("/api/health");
        setDot("apiDot","green");
        setText("apiText","API: OK");
        setText("healthOut", JSON.stringify(data, null, 2));
      }catch(e){
        setDot("apiDot","red");
        setText("apiText","API: NG");
        setText("healthOut", String(e));
      }
    }
    document.getElementById("btnHealth").addEventListener("click", runHealth);
    runHealth();
  </script>
</body>
</html>
